{"version":3,"sources":["house.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"house.js","sourcesContent":["$(function() {\n\n  // Build title suggestion\n  var buildTitleSuggestion = function() {\n    var titleSuggestion = '';\n    var type = '';\n    var street = '';\n    var ward = '';\n    var district = '';\n    var square = '';\n    var price = '';\n\n    if ($('#type').val() != '')\n      type = $('#type option:selected').text();\n    if ($('#street').val() != '')\n      street = $('#street option:selected').text();\n    if ($('#ward').val() != '')\n      ward = $('#ward option:selected').text();\n    if ($('#district').val() != '')\n      district = $('#district option:selected').text();\n    square = $('#square').val().trim();\n    price = $('#price').val().trim();\n\n    var location = '';\n    if (street != '' || ward != '' || district != '') {\n      location = 'tại ';\n      if (street != '')\n        location = location + street + ',';\n      if (ward != '') {\n        if (location[location.length - 1] == ',') // Last character is ,\n          location = location + ' ' + ward + ',';\n        else\n          location = location + ward + ',';\n      }\n      if (district != '') {\n        if (location[location.length - 1] == ',') // Last character is ,\n          location = location + ' ' + district + ',';\n        else\n          location = location + district + ',';\n      }\n      location = location.substr(0, location.length - 1); // Remove last character\n    }\n    if (type != '' && location != '') {\n      titleSuggestion = 'Cho thuê ' + type + ' ' + location;\n      if (square != '')\n        titleSuggestion = titleSuggestion + ' diện tích ' + square + 'm2';\n      if (price != '')\n        titleSuggestion = titleSuggestion + ' giá ' + price + ' triệu/tháng';\n    }\n    // Set title suggestion for the label\n    $('#title-suggestion').text(titleSuggestion);\n    // If type and location are identify, the title suggestion container is visible\n    if (titleSuggestion != '')\n      $('#title-suggestion-container').show();\n    else\n      $('#title-suggestion-container').hide();\n  }\n\n  //  Initial bootstrap select\n  $('.house .selectpicker').selectpicker({\n    width: '100%'\n  });\n\n  // Fire event select box changed when page load\n  setTimeout(function() {\n    $('#district').trigger('change');\n  }, 10);\n\n  $('#district').bind('change', function() {\n    // Get list of wards when district is changed\n    // Get the default value of ward select option\n    var default_ward = $('#ward [value=\"\"]').text();\n\n    // Clear all data in wards select option\n    $('#ward').empty();\n\n    // Append a default value\n    $('#ward').append($('<option>').text(default_ward).attr('value', ''));\n\n    $.ajax({\n      type: 'POST',\n      url: '/ajax/getWardsByDistrictId',\n      data: {'id': $(this).val()},\n      dataType: 'json',\n      success: function(result) {\n        // Init new data for ward select option\n        $.each(result, function(i, value) {\n            $('#ward').append($('<option>').text(value).attr('value', i));\n        });\n        $('#ward').val($('#ward_hidden_id').val());\n        $('#ward').selectpicker('refresh');\n        buildTitleSuggestion();\n      }\n    });\n\n    // Get list of streets when district is changed\n    // Get the default value of street select option\n    var default_street = $('#street [value=\"\"]').text();\n\n    // Clear all data in streets select option\n    $('#street').empty();\n\n    // Append a default value\n    $('#street').append($('<option>').text(default_street).attr('value', ''));\n\n    $.ajax({\n      type: 'POST',\n      url: '/ajax/getStreetsByDistrictId',\n      data: {'id': $(this).val()},\n      dataType: 'json',\n      success: function(result) {\n        // Init new data for street select option\n        $.each(result, function(i, value) {\n            $('#street').append($('<option>').text(value).attr('value', i));\n        });\n        $('#street').val($('#street_hidden_id').val());\n        $('#street').selectpicker('refresh');\n      }\n    });\n  });\n  $('#type').bind('change', function() {\n    buildTitleSuggestion();\n  });\n  $('#ward').bind('change', function() {\n    buildTitleSuggestion();\n  });\n  $('#street').bind('change', function() {\n    buildTitleSuggestion();\n  });\n  $('#square').bind('keyup', function() {\n    buildTitleSuggestion();\n  });\n  $('#price').bind('keyup', function() {\n    buildTitleSuggestion();\n  });\n\n  // use title suggestion\n  $('#use-title-suggestion').bind('click', function() {\n    $('#title').val($('#title-suggestion').text());\n  });\n\n  // confirm cancellation\n  $('#btn-cancel').bind('click', function() {\n    if (confirm('Bạn muốn hủy tin đăng này chứ?')) {\n      window.location = '/dang-tin';\n    }\n  });\n  $('#btn-cancel-update').bind('click', function() {\n    if (confirm('Bạn muốn hủy việc cập nhật này chứ?')) {\n      window.location = '/sua-tin/' + $('#house-id').text();\n    }\n  });\n  $('#btn-delete').bind('click', function() {\n    if (confirm('Bạn chắc chắn muốn xóa bất động sản này chứ?')) {\n      $.ajax({\n        type: 'post',\n        url: '/ajax/deleteHouse',\n        data: {\n          _method: 'delete',\n          _token : $('input[name=_token]').val(),\n          id: $('#house-id').text()\n        },\n        dataType: 'json',\n        success: function(result) {\n          if (result.status == '1')\n            window.location = '/dang-tin/';\n          else\n            window.location = '/dang-tin/';\n        }\n      });\n    }\n  });\n\n  $('input[type=file]').bootstrapFileInput();\n});\n"],"sourceRoot":"/source/"}